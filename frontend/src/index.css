@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- Базовые переменные темы (внутри Tailwind layer, чтобы не выпилились) --- */
@layer base {
  :root{
    --bg:#F5EFE6; --paper:#FAF7F2; --ink:#2B2A27; --muted:#8C8072; --line:#E8E1D8;
    --accent:#D0B8A8; --gold:#E8D5B5; --blush:#F1DAD4; --sage:#DCE6D5; --sky:#DDEAF3; --lav:#EAE4F2;
    --shadow-soft:0 10px 30px rgba(126,108,87,.15);
    --shadow-tiny:0 2px 12px rgba(110,92,74,.10);
    --radius-lg:20px; --radius-md:14px; --radius-sm:10px;
  }
  *{ box-sizing: border-box; }
}

/* --- Компоненты: точный вид кнопок/полей как раньше --- */
@layer components {
  .card-glass{
    background:linear-gradient(180deg,rgba(255,255,255,.58),rgba(255,255,255,.42));
    border:1px solid rgba(255,255,255,.68);
    backdrop-filter:blur(14px) saturate(140%);
    border-radius:var(--radius-lg);
    box-shadow:var(--shadow-soft);
  }
  .paper{
    background:var(--paper);
    border:1px solid var(--line);
    border-radius:var(--radius-lg);
    box-shadow:var(--shadow-tiny);
  }
  .btn{
    appearance:none;
    border:1px solid var(--line);
    border-radius:999px;
    padding:.8rem 1.2rem;
    background:var(--paper);
    color:var(--ink);
    font-weight:600;
    cursor:pointer;
    transition:.2s ease;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    text-decoration:none;
  }
  .btn:hover{ box-shadow:var(--shadow-tiny); transform:translateY(-1px); }
  .btn.primary{
    background:linear-gradient(180deg,var(--accent),#c8a997);
    border-color:transparent;
    color:#fff;
    box-shadow:var(--shadow-soft);
  }
  .btn.danger{
    background:linear-gradient(180deg,#f28f82,#e25d4c);
    border-color:transparent;
    color:#fff;
    box-shadow:var(--shadow-soft);
  }
  .btn:disabled{
    opacity:.55;
    cursor:not-allowed;
    box-shadow:none;
    transform:none;
  }
  .btn:disabled:hover{
    box-shadow:none;
    transform:none;
  }
  .icon-btn{
    width:2.4rem;
    height:2.4rem;
    padding:0;
  }
  .input{
    width:100%;
    padding:.9rem 1rem;
    border-radius:14px;
    border:1px solid var(--line);
    background:linear-gradient(180deg,rgba(255,255,255,.65),rgba(255,255,255,.4));
    outline:none;
    transition:.2s ease;
  }
  .input::placeholder{ color:#a29586; }
  .input:focus{ border-color:#d9c8b2; box-shadow:0 0 0 4px rgba(232,213,181,.28); }
  .status-select{
    position:relative;
    display:block;
  }
  .status-select::after{
    content:"";
    position:absolute;
    top:50%;
    right:1.1rem;
    width:.6rem;
    height:.6rem;
    border-right:2px solid rgba(91,82,70,.65);
    border-bottom:2px solid rgba(91,82,70,.65);
    transform:translateY(-50%) rotate(45deg);
    pointer-events:none;
    transition:.2s ease;
  }
  .status-select:focus-within::after,
  .status-select--open::after{
    border-color:rgba(91,82,70,.85);
    transform:translateY(-50%) rotate(225deg);
  }
  .status-select__field{
    width:100%;
    appearance:none;
    border-radius:var(--radius-md);
    border:1px solid var(--line);
    background:linear-gradient(180deg,rgba(255,255,255,.82),rgba(247,237,226,.62));
    color:var(--ink);
    font:inherit;
    font-weight:600;
    letter-spacing:.01em;
    padding:.95rem 1.15rem;
    padding-right:2.8rem;
    outline:none;
    transition:.2s ease;
    box-shadow:0 6px 18px rgba(110,92,74,.08);
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:space-between;
    text-align:left;
    gap:.75rem;
  }
  .status-select__field:hover{
    box-shadow:0 10px 24px rgba(110,92,74,.12);
  }
  .status-select__field:focus,
  .status-select__field:focus-visible{
    border-color:#d9c8b2;
    box-shadow:0 0 0 4px rgba(232,213,181,.28);
  }
  .status-select__label{
    flex:1;
    color:var(--ink);
  }
  .status-select__list{
    position:absolute;
    top:calc(100% + .6rem);
    left:0;
    right:0;
    margin:0;
    padding:.45rem;
    list-style:none;
    background:linear-gradient(180deg,rgba(255,255,255,.95),rgba(248,239,227,.85));
    border:1px solid rgba(216,200,180,.7);
    border-radius:var(--radius-md);
    box-shadow:0 18px 36px rgba(110,92,74,.14);
    display:grid;
    gap:.35rem;
    opacity:0;
    pointer-events:none;
    transform:translateY(6px);
    transition:.2s ease;
    z-index:30;
    max-height:280px;
    overflow:auto;
    visibility:hidden;
  }
  .status-select--open .status-select__list{
    opacity:1;
    pointer-events:auto;
    transform:translateY(0);
    visibility:visible;
  }
  .status-select__option{
    width:100%;
    padding:.75rem 1rem;
    border-radius:12px;
    border:1px solid transparent;
    background:linear-gradient(180deg,rgba(255,255,255,.9),rgba(246,236,224,.6));
    color:var(--ink);
    font:inherit;
    font-weight:500;
    text-align:left;
    cursor:pointer;
    outline:none;
    transition:.2s ease;
  }
  .status-select__option:hover,
  .status-select__option:focus-visible{
    box-shadow:var(--shadow-tiny);
    transform:translateY(-1px);
  }
  .status-select__option--active{
    background:linear-gradient(180deg,var(--accent),#c8a997);
    color:#fff;
    box-shadow:0 12px 28px rgba(150,120,96,.24);
  }
  .status-select__option--active:hover,
  .status-select__option--active:focus-visible{
    transform:none;
  }

  .tag{
    position:absolute; top:.6rem; left:.6rem;
    padding:.25rem .5rem; background:rgba(255,255,255,.85); color:#534a3f;
    border-radius:999px; font-size:.75rem; border:1px solid rgba(0,0,0,.05);
  }
  .cover{ position:relative; aspect-ratio:3/4; border-radius:14px; overflow:hidden; border:1px solid var(--line); box-shadow:var(--shadow-tiny); display:flex; align-items:flex-end; }
  .cover .meta{ width:100%; padding:.6rem .8rem; background:linear-gradient(0deg,rgba(0,0,0,.28),rgba(0,0,0,0)); color:#fff; font-size:.9rem; }
  .cover-page .tag{
    padding:.3rem .65rem;
    background:rgba(255,255,255,.88);
    color:#4a4037;
    font-size:.78rem;
    font-weight:600;
    border:1px solid rgba(0,0,0,.08);
    box-shadow:0 6px 12px rgba(64,56,50,.14);
  }
  .cover-page .cover{
    overflow:visible;
    display:block;
    border:none;
    box-shadow:none;
    border-radius:var(--radius-md);
    isolation:isolate;
  }
  .cover-page .cover .meta{
    padding:.85rem 1rem;
    background:linear-gradient(0deg,rgba(16,14,13,.62),rgba(16,14,13,.12));
    font-size:.95rem;
    line-height:1.35;
    letter-spacing:.01em;
  }
  .cover-page .cover-card{
    perspective:1200px;
  }
  .cover-page .cover-card .cover-outer{
    position:relative;
    width:100%;
    height:100%;
    border-radius:inherit;
    transform-style:preserve-3d;
    transition:transform .75s cubic-bezier(.22,.61,.36,1), box-shadow .3s ease;
    box-shadow:var(--shadow-soft);
    background:var(--paper);
  }
  .cover-page .cover-card .cover-outer::after{
    content:"";
    position:absolute;
    inset:0;
    border-radius:inherit;
    border:1px solid rgba(255,255,255,.18);
    mix-blend-mode:soft-light;
    pointer-events:none;
  }
  .cover-page .cover-card .cover-face{
    position:absolute;
    inset:0;
    border-radius:inherit;
    display:flex;
    flex-direction:column;
    align-items:flex-start;
    justify-content:flex-end;
    backface-visibility:hidden;
    overflow:hidden;
  }
  .cover-page .cover-card .cover-face::after{
    content:"";
    position:absolute;
    inset:0;
    background:linear-gradient(180deg,rgba(31,27,24,.1),rgba(31,27,24,.38));
    pointer-events:none;
  }
  .cover-page .cover-card .cover-face > *{
    position:relative;
    z-index:1;
  }
  .cover-page .cover-card .cover-face--center{
    align-items:center;
    justify-content:center;
    padding:0 1.4rem;
  }
  .cover-page .cover-card .cover-face--center::after{
    opacity:0;
  }
  .cover-page .cover-card .cover-copy{
    display:inline-block;
    padding:1.1rem 1.4rem;
    border-radius:16px;
    background:linear-gradient(180deg,rgba(255,248,240,.92),rgba(251,235,215,.82));
    color:#3a312a;
    text-align:center;
    font-size:.98rem;
    line-height:1.4;
    box-shadow:0 12px 26px rgba(166,130,102,.18);
  }
  .cover-page .cover-card .cover-back .cover-copy{
    font-weight:600;
  }
  .cover-page .cover-card .meta--center{
    background:transparent;
    padding:0;
  }
  .cover-page .cover-card--custom .cover-back .meta{
    background:transparent;
  }
  .cover-page .cover-card .cover-front{
    transform:rotateY(0deg);
  }
  .cover-page .cover-card .cover-back{
    transform:rotateY(180deg);
  }
  .cover-page .cover-card:hover .cover-outer,
  .cover-page .cover-card:focus-within .cover-outer{
    transform:translateY(-6px) rotateY(-6deg);
    box-shadow:0 20px 36px rgba(110,92,74,.18);
  }
  .cover-page .cover-card--custom.cover-card--flipped .cover-outer{
    transform:rotateY(180deg) translateZ(6px);
    box-shadow:0 18px 42px rgba(110,92,74,.24);
  }
  .cover-page .cover-card--custom.cover-card--flipped:hover .cover-outer,
  .cover-page .cover-card--custom.cover-card--flipped:focus-within .cover-outer{
    transform:rotateY(180deg) translateZ(6px);
  }
  .cover-page .cover-spine{
    position:absolute;
    top:6%;
    bottom:6%;
    left:-9px;
    width:14px;
    border-radius:10px 0 0 10px;
    background:linear-gradient(180deg,rgba(72,58,50,.3),rgba(72,58,50,.12));
    box-shadow:-6px 0 18px rgba(62,51,43,.18);
    pointer-events:none;
  }
  .cover-page .cover-edge{
    position:absolute;
    top:8%;
    bottom:8%;
    right:-11px;
    width:12px;
    border-radius:0 10px 10px 0;
    background:linear-gradient(90deg,#f6eee2,#e9d9c7);
    box-shadow:inset 0 0 0 1px rgba(60,52,45,.1);
    pointer-events:none;
  }
  .cover-page .cover-edge::after{
    content:"";
    position:absolute;
    inset:0;
    background:repeating-linear-gradient(180deg,rgba(0,0,0,.08),rgba(0,0,0,.08) 1px,transparent 1px,transparent 3px);
    opacity:.25;
  }
  .cover-page .cover-input{
    z-index:5;
  }
  .topbar{ position:sticky; top:0; z-index:40; backdrop-filter:saturate(140%) blur(8px); background-color:rgba(250,247,242,.75); border-bottom:1px solid var(--line); }
  .hairline{ height:1px; background:var(--line); border:none; margin:1rem 0 }
  .status{ display:flex; align-items:center; gap:.6rem; padding:.8rem; background:linear-gradient(180deg,rgba(255,255,255,.6),rgba(255,255,255,.4)); border:1px solid var(--line); border-radius:12px; }
  .modal-backdrop{
    position:fixed;
    inset:0;
    z-index:80;
    display:grid;
    place-items:center;
    padding:1.5rem;
    background:rgba(31,29,27,.32);
    backdrop-filter:blur(8px);
  }
  .modal-card{
    width:min(420px,92vw);
    padding:1.6rem;
    border-radius:var(--radius-lg);
    background:linear-gradient(180deg,rgba(255,255,255,.82),rgba(255,255,255,.66));
    border:1px solid rgba(255,255,255,.75);
    box-shadow:var(--shadow-soft);
  }
  .modal-actions{
    display:flex;
    align-items:center;
    justify-content:flex-end;
    gap:.5rem;
  }
  .password-field{ position:relative; }
  .password-toggle{
    position:absolute;
    top:50%;
    right:.75rem;
    transform:translateY(-50%);
    display:inline-flex;
    align-items:center;
    justify-content:center;
    width:2rem;
    height:2rem;
    border-radius:999px;
    border:1px solid transparent;
    background:rgba(255,255,255,.6);
    color:#6f6457;
    cursor:pointer;
    transition:.2s ease;
    padding:0;
  }
  .password-toggle:hover{
    background:rgba(255,255,255,.85);
    box-shadow:var(--shadow-tiny);
  }
  .password-toggle__icon{
    width:1.15rem;
    height:1.15rem;
  }

  @media (max-width: 768px) {
    .admin-layout{
      min-height:100vh;
      padding-bottom:calc(48px + env(safe-area-inset-bottom,0px));
    }
    .admin-shell{
      display:block;
      padding-top:calc(120px + env(safe-area-inset-top,0px));
      padding-bottom:2rem;
    }
    .admin-nav{
      position:fixed;
      top:0;
      left:0;
      right:0;
      z-index:60;
      border-radius:0;
      border-bottom-left-radius:var(--radius-lg);
      border-bottom-right-radius:var(--radius-lg);
      display:flex;
      flex-direction:column;
      gap:.75rem;
      padding:calc(env(safe-area-inset-top,0px) + .85rem) 1rem 1rem;
      box-shadow:0 18px 32px rgba(110,92,74,.18);
      backdrop-filter:saturate(160%) blur(12px);
    }
    .admin-nav__header{
      flex-direction:row;
      align-items:center;
      justify-content:space-between;
      margin-bottom:0;
    }
    .admin-nav__header .font-serif{
      font-size:1.05rem;
    }
    .admin-nav__list{
      display:flex;
      align-items:center;
      gap:.6rem;
      overflow-x:auto;
      padding-bottom:.35rem;
      margin:0 -.35rem;
      scrollbar-width:none;
    }
    .admin-nav__list::-webkit-scrollbar{ display:none; }
    .admin-nav__item{
      flex:1 0 auto;
      min-width:110px;
      justify-content:center;
      white-space:nowrap;
    }
    .admin-nav__item span:last-child{
      font-size:.9rem;
    }
    .admin-nav__divider{
      display:none;
    }
    .admin-nav__logout{
      width:auto;
      align-self:flex-end;
      padding-inline:1rem;
    }
    .admin-content{
      padding-top:1.5rem;
      padding-bottom:2.5rem;
    }
    .modal-backdrop{
      padding:clamp(0.75rem,4vw,1.5rem);
      align-items:flex-start;
    }
    .modal-card{
      width:min(600px,100%);
      max-height:min(92vh,640px);
      overflow-y:auto;
      display:flex;
      flex-direction:column;
      padding:1.4rem clamp(1rem,4vw,1.6rem);
    }
    .modal-actions{
      position:sticky;
      bottom:0;
      margin-top:.5rem;
      padding-top:.75rem;
      padding-bottom:calc(.35rem + env(safe-area-inset-bottom,0px));
      background:linear-gradient(180deg,transparent 0%,rgba(250,247,242,.92) 45%,rgba(250,247,242,.98) 100%);
    }
  }
}
